(function(){"use strict";function o(n,t,s,e,a,c,d,b){var i=typeof n=="function"?n.options:n;t&&(i.render=t,i.staticRenderFns=s,i._compiled=!0),e&&(i.functional=!0),c&&(i._scopeId="data-v-"+c);var l;if(d?(l=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__<"u"&&(r=__VUE_SSR_CONTEXT__),a&&a.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(d)},i._ssrRegister=l):a&&(l=b?function(){a.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(i.functional){i._injectStyles=l;var L=i.render;i.render=function(S,h){return l.call(h),L(S,h)}}else{var u=i.beforeCreate;i.beforeCreate=u?[].concat(u,l):[l]}return{exports:n,options:i}}const _={data(){return{isLoading:!0,headline:"Translations",translations:null,states:["false","pending","true"],icons:{true:"check",pending:"clock",false:"cancel"}}},computed:{currentLanguage(){return this.$language},languages(){return this.$languages},current(){return this.$store.state.content.current},model(){return this.$store.getters["content/model"](this.current)},pageId(){return this.current.substring(7,this.current.length).replaceAll("+","/").replace(/(\?.*)/,"")}},methods:{getTranslationsStatus(){this.load().then(n=>{this.headline=n.headline,this.translations=n.translations,this.isLoading=!1}).catch(n=>{console.log(n)})},setLanguage(n){this.$emit("change",n),this.$go(window.location,{query:{language:n.code}})},setTranslationStatus(n,t){let s=this.states.indexOf(t),e=s+1==this.states.length?this.states[0]:this.states[s+1];this.$api.post("set-translation-status",{languageCode:n,status:e,pageId:this.pageId}).then(a=>{this.$set(this.translations,n,a.value),n===this.currentLanguage.code&&this.updateModelField("translated",a.value.toString())}).catch(function(a){console.log(a)})},updateModelField(n,t){let s=JSON.parse(JSON.stringify(this.model.originals));s[n]=t}},created(){this.getTranslationsStatus(),this.$events.$on("model.update",this.getTranslationsStatus)},destroyed(){this.$events.$off("model.update",this.getTranslationsStatus)}};var f=function(){var t=this,s=t._self._c;return t.isLoading?t._e():s("section",{staticClass:"k-modified-section"},[s("header",{staticClass:"k-section-header"},[s("k-headline",[t._v(t._s(t.headline))])],1),s("div",{staticClass:"translations-status"},[t._l(t.languages,function(e){return[s("div",{staticClass:"translation-status",class:{active:e.code===t.currentLanguage.code}},[t.translations?s("button",{staticClass:"translation-state",on:{click:function(a){return t.setTranslationStatus(e.code,t.translations[e.code])}}},[s("k-icon",{class:"translated-"+t.translations[e.code],attrs:{type:t.icons[t.translations[e.code]]}})],1):t._e(),s("button",{staticClass:"translation-link",on:{click:function(a){return t.setLanguage(e)}}},[t._v(t._s(e.name))])])]})],2)])},p=[],g=o(_,f,p,!1,null,null,null,null);const v=g.exports,k={data(){return{headline:"Translations",index:null,isLoading:!0,icons:{true:"check",pending:"clock",false:"cancel"}}},computed:{languages(){return this.$languages}},methods:{update(){this.isLoading=!0,this.load().then(n=>{this.headline=n.headline,this.index=n.index,this.isLoading=!1})}},created(){this.update(),this.$store.subscribeAction((n,t)=>{n.type=="languages/current"&&this.$nextTick(()=>{this.update()})})}};var m=function(){var t=this,s=t._self._c;return s("section",{staticClass:"k-modified-section"},[t.isLoading?[s("div",{staticClass:"k-translations-index-loading-container"},[s("div",{staticClass:"k-translations-index-spinner"},[s("k-icon",{staticClass:"icon",attrs:{type:"loader",size:"medium"}})],1),s("div",{staticClass:"k-translations-index-loading"},[t._v(t._s(t.$t("loading")))])])]:[s("header",{staticClass:"k-section-header"},[s("k-headline",[t._v(t._s(t.headline))])],1),s("div",{staticClass:"k-collection translations-index"},[s("div",{staticClass:"k-items k-list-items"},[s("article",{staticClass:"k-translations-index-header k-item k-list-item"},[s("span",{staticClass:"k-item-figure"}),s("span",{staticClass:"k-item-content"},[s("span",{staticClass:"k-item-title"},[t._v(t._s(t.$t("pages")))])]),s("span",{staticClass:"k-item-options"},[t._l(t.languages,function(e){return[s("span",{staticClass:"translation-index-state"},[t._v(" "+t._s(e.code)+" ")])]})],2)]),t._l(t.index,function(e){return[s("k-item",{attrs:{layout:"list",image:e.image}},[s("span",{staticClass:"k-item-title"},[s("k-link",{key:e.panelUrl,staticClass:"k-item-title-link",attrs:{to:e.panelUrl}},[e.breadcrumbs?s("span",{staticClass:"translation-breadcrumbs",domProps:{innerHTML:t._s(e.breadcrumbs+"&ensp;>&ensp;")}}):t._e(),s("span",[t._v(t._s(e.title))])])],1),s("span",{staticClass:"k-item-options"},[t._l(t.languages,function(a){return[e.translations?s("button",{staticClass:"translation-index-state"},[s("k-icon",{class:"translated-"+e.translations[a.code],attrs:{type:t.icons[e.translations[a.code]]}})],1):t._e()]})],2)])]})],2)])]],2)},C=[],$=o(k,m,C,!1,null,null,null,null);const T=$.exports;window.panel.plugin("samrm/translations",{sections:{translations:v,translationsindex:T}})})();
